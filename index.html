<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galería / Catálogo</title>
  <style>
    :root{
      --bg:#0b0d12;
      --panel:#121522;
      --panel2:#151a2b;
      --text:#e9eefc;
      --muted:#9aa6c6;
      --accent:#7c5cff;
      --accent2:#4bd3ff;
      --border:rgba(255,255,255,.08);
      --shadow: 0 12px 35px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 500px at 20% -10%, rgba(124,92,255,.20), transparent 60%),
        radial-gradient(1000px 420px at 90% 10%, rgba(75,211,255,.12), transparent 55%),
        linear-gradient(180deg, #080a10, var(--bg));
      color:var(--text);
      min-height:100vh;
    }

    .wrap{max-width:1180px;margin:0 auto;padding:22px 16px 90px}
    .topbar{
      display:flex;gap:12px;align-items:center;justify-content:space-between;
      margin:8px 0 18px;
    }
    .brand{
      display:flex;align-items:center;gap:10px;
      font-weight:700;letter-spacing:.2px;
    }
    .logo{
      width:36px;height:36px;border-radius:12px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 10px 20px rgba(124,92,255,.25);
    }
    .brand small{display:block;color:var(--muted);font-weight:500;margin-top:2px}

    .toolbar{
      display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;
      background: rgba(255,255,255,.03);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px;
      box-shadow: var(--shadow);
    }

    .search{
      display:flex;gap:10px;align-items:center;flex:1;min-width:280px;
      background: rgba(0,0,0,.28);
      border:1px solid var(--border);
      border-radius: 14px;
      padding:10px 12px;
    }
    .search input{
      width:100%;
      background:transparent;border:0;outline:none;
      color:var(--text);
      font-size:14px;
    }
    .btn{
      border:0;cursor:pointer;
      color:#fff;
      background: linear-gradient(135deg, var(--accent), #5b44ff);
      padding:10px 14px;border-radius: 12px;
      font-weight:650;
      box-shadow: 0 10px 18px rgba(124,92,255,.25);
      transition: transform .08s ease, filter .2s ease;
      white-space:nowrap;
    }
    .btn:active{transform: translateY(1px)}
    .btn.secondary{
      background: rgba(255,255,255,.06);
      border:1px solid var(--border);
      box-shadow:none;
      color:var(--text);
    }

    .chips{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius: 14px;
      background: rgba(255,255,255,.04);
      border:1px solid var(--border);
      color:var(--text);
      cursor:pointer;
      user-select:none;
      transition: background .2s ease, border-color .2s ease;
      font-weight:600;
      font-size:13px;
    }
    .chip.active{
      background: rgba(124,92,255,.18);
      border-color: rgba(124,92,255,.45);
    }
    .chip .dot{
      width:8px;height:8px;border-radius:99px;background:rgba(255,255,255,.35)
    }
    .chip.active .dot{background: var(--accent)}

    .sort{
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;
    }
    .sort label{color:var(--muted);font-size:13px}
    select{
      background: rgba(0,0,0,.28);
      border:1px solid var(--border);
      color:var(--text);
      border-radius: 12px;
      padding:10px 12px;
      outline:none;
      cursor:pointer;
      font-weight:600;
    }

    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:14px;
    }
    @media (max-width: 1050px){ .grid{grid-template-columns: repeat(3, 1fr);} }
    @media (max-width: 780px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 480px){ .grid{grid-template-columns: 1fr;} }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      display:flex;flex-direction:column;
      min-height: 320px;
    }
    .thumb{
      position:relative;
      width:100%;
      aspect-ratio: 16 / 10;
      background: rgba(255,255,255,.03);
      overflow:hidden;
    }
    .thumb img{
      width:100%;height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.02);
      filter: saturate(1.05) contrast(1.05);
    }
    .badge{
      position:absolute;left:12px;top:12px;
      background: rgba(20,24,40,.85);
      border:1px solid rgba(255,255,255,.14);
      color:#dfffe9;
      font-weight:800;
      font-size:12px;
      padding:6px 10px;border-radius: 999px;
      letter-spacing:.3px;
      text-transform: uppercase;
    }
    .badge.new{ color:#dfffe9; }
    .badge.hot{ color:#ffe9c2; }
    .watermark{
      position:absolute;right:10px;top:10px;
      background: rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.12);
      padding:6px 8px;border-radius:12px;
      font-size:11px;color:rgba(255,255,255,.85);
      backdrop-filter: blur(6px);
    }

    .content{padding:14px 14px 12px;display:flex;flex-direction:column;gap:10px;flex:1}
    .title{
      font-weight:800;
      letter-spacing:.2px;
      margin:0;
      font-size:16px;
    }
    .meta{
      display:flex;gap:14px;flex-wrap:wrap;
      color:var(--muted);
      font-size:12.5px;
      align-items:center;
    }
    .meta span{display:inline-flex;gap:6px;align-items:center}

    .actions{
      display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:auto;
    }

    .share{
      display:flex;gap:8px;align-items:center;
    }
    .iconBtn{
      width:38px;height:38px;border-radius: 14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      display:grid;place-items:center;
      cursor:pointer;
      transition: transform .08s ease, background .2s ease;
    }
    .iconBtn:hover{background: rgba(255,255,255,.07)}
    .iconBtn:active{transform: translateY(1px)}
    .iconBtn svg{width:18px;height:18px;fill: rgba(255,255,255,.88)}

    .empty{
      margin:22px 0;
      padding:22px;
      border:1px dashed rgba(255,255,255,.18);
      border-radius: var(--radius);
      color: var(--muted);
      text-align:center;
    }

    /* Modal */
    .modal{
      position:fixed;inset:0;
      background: rgba(0,0,0,.6);
      display:none;
      align-items:center;justify-content:center;
      padding:18px;
      z-index: 1000;
    }
    .modal.show{display:flex}
    .modalCard{
      width:min(980px, 100%);
      background: rgba(16,18,28,.92);
      border:1px solid rgba(255,255,255,.14);
      border-radius: 22px;
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .modalHead{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      gap:10px;
    }
    .modalHead strong{font-size:14px}
    .close{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:700;
    }
    .player{
      width:100%;
      aspect-ratio: 16/9;
      background:#000;
      position:relative;
    }
    .player iframe, .player video{
      width:100%;height:100%;
      display:block;border:0;
      background:#000;
    }

    /* Floating share rail (opcional) */
    .rail{
      position:fixed;
      right:14px;
      top:50%;
      transform: translateY(-50%);
      display:flex;flex-direction:column;gap:10px;
      z-index: 900;
    }
    .rail .bubble{
      width:44px;height:44px;border-radius: 16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      display:grid;place-items:center;
      box-shadow: 0 14px 26px rgba(0,0,0,.35);
      cursor:pointer;
    }
    .rail .bubble svg{width:20px;height:20px;fill: rgba(255,255,255,.9)}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- TODO: Aquí va tu contenido original del Catálogo -->
  </div>

  <script>
    /**
     * Datos
     */
    const items = [
      {
        id: "m1",
        name: "Marian Franco",
        thumbUrl: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=1200&q=70",
        videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
        views: 233,
        date: "2026-01-16",
        isNew: true,
      },
      // Más datos aquí...
    ];

    // Estado UI
    let state = {
      query: "",
      filter: "all", // all | new | popular
      sort: "recent", // recent | views | name
    };

    const $ = (sel) => document.querySelector(sel);
    const grid = $("#grid");
    const empty = $("#empty");

    const modal = $("#modal");
    const modalTitle = document.querySelector("#modalTitle");
    const posterImg = document.querySelector("#posterImg");
    const posterLayer = document.querySelector("#posterLayer");
    const mediaLayer = document.querySelector("#mediaLayer");
    const playBtn = document.querySelector("#playBtn");

    let currentItem = null;

    // Construir video (reproducción)
    function buildMedia(url){
      const isVideoFile = /\.(mp4|webm|ogg)(\?.*)?$/i.test(url);
      mediaLayer.innerHTML = "";

      if (isVideoFile){
        const v = document.createElement("video");
        v.src = url;
        v.controls = true;
        v.autoplay = true;
        v.playsInline = true;

        // Autoplay siguiente video al terminar
        v.addEventListener('ended', () => {
          const idx = items.findIndex(x => x.id === currentItem.id);
          const next = items[idx + 1];  // Siguiente video
          if (next) {
            openPosterModal(next);  // Mostrar siguiente
            buildMedia(next.videoUrl); // Reproducir siguiente
          }
        });

        mediaLayer.appendChild(v);
      } else {
        const iframe = document.createElement("iframe");
        iframe.src = url;
        iframe.allow = "autoplay; encrypted-media; picture-in-picture";
        iframe.allowFullscreen = true;
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.border = "0";
        mediaLayer.appendChild(iframe);
      }
    }

    function openPosterModal(item){
      currentItem = item;
      modalTitle.textContent = item.name || "Video";
      posterImg.src = item.thumbUrl;

      mediaLayer.innerHTML = "";
      posterLayer.style.display = "grid";

      modal.classList.add("show");
      document.body.style.overflow = "hidden";
    }

    // Reproducir video
    playBtn.addEventListener("click", () => {
      if(!currentItem) return;
      buildMedia(currentItem.videoUrl);
      posterLayer.style.display = "none";
      currentItem.views = (currentItem.views || 0) + 1;
      applyState();
    });

    function closeModal(){
      modal.classList.remove("show");
      document.body.style.overflow = "";
      mediaLayer.innerHTML = "";
      posterLayer.style.display = "grid";
      currentItem = null;
    }

    document.querySelector("#modalClose").addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=>{ if(e.target === modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

    // Lógica de filtros, búsqueda, y orden
    $("#btnSearch").addEventListener("click", ()=>{
      state.query = $("#q").value;
      applyState();
    });

    $("#sort").addEventListener("change", (e)=>{
      state.sort = e.target.value;
      applyState();
    });

    // Resetear filtros
    $("#btnReset").addEventListener("click", ()=>{
      state = { query:"", filter:"all", sort:"recent" };
      $("#q").value = "";
      $("#sort").value = "recent";
      document.querySelectorAll(".chip").forEach(c=>c.classList.remove("active"));
      document.querySelector('.chip[data-filter="all"]').classList.add("active");
      applyState();
    });

    // Delegación de eventos: ver video / compartir / copiar
    grid.addEventListener("click", async (e)=>{
      const btn = e.target.closest("[data-action]");
      if(!btn) return;
      const action = btn.dataset.action;
      const id = btn.dataset.id;
      const item = items.find(x => x.id === id);
      if(!item) return;

      if(action === "watch"){
       openPosterModal(item);
      }

      if(action === "copy"){
        const link = makeItemLink(item);
        await navigator.clipboard.writeText(link);
        toast("Enlace copiado ✅");
      }

      if(action === "share"){
        const data = {
          title: item.name,
          text: `Mira: ${item.name}`,
          url: makeItemLink(item),
        };
        if(navigator.share){
          try { await navigator.share(data); } catch {}
        } else {
          await navigator.clipboard.writeText(data.url);
          toast("No hay compartir nativo. Enlace copiado ✅");
        }
      }
    });

    // Inicialización de estado
    applyState();
  </script>
</body>
</html>
