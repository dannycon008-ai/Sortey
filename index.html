<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>TuChat ‚Äî Demo</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:Poppins,sans-serif;background:#0b1220;color:#e9f6ff}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    .view{display:none}.view.active{display:block}

    /* HEADER */
    .header{position:sticky;top:0;z-index:50;background:rgba(10,18,32,.9);backdrop-filter:blur(6px);border-bottom:1px solid #132338;display:none;}
    .header-inner{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .btn{border:0;padding:8px 14px;border-radius:10px;font-weight:600;cursor:pointer;transition:.2s;font-size:14px}
    .btn-primary{background:linear-gradient(90deg,#ff2e6a,#ff4f8b);color:#fff;box-shadow:0 4px 12px rgba(0,0,0,.4);}
    .btn-primary:hover{transform:translateY(-2px)}

    /* LOGIN */
    .login-card{max-width:360px;margin:60px auto;padding:28px;background:#0f172a;border-radius:20px;box-shadow:0 12px 32px rgba(0,0,0,.55);text-align:center;color:#fff;}
    .login-logo{width:90px;margin-bottom:18px;border-radius:12px;}
    .login-card h2{font-size:20px;margin-bottom:6px;}
    .login-card p{font-size:14px;margin-bottom:20px;color:#cbd5e1;}
    .form-group{margin-bottom:14px;}
    .login-input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #1f3550;background:#0e192a;color:#fff;}
    .btn-login{width:100%;padding:12px;font-size:15px;font-weight:700;border:none;border-radius:14px;background:linear-gradient(90deg,#ff2e6a,#ff4f8b);color:#fff;cursor:pointer;}
    .btn-login:hover{transform:translateY(-2px);}

    /* CHAT */
    .chat-card{background:#0f172a;border-radius:20px;box-shadow:0 8px 25px rgba(0,0,0,.45);overflow:hidden;position:fixed;bottom:20px;right:20px;width:380px;max-height:520px;z-index:1000;display:flex;flex-direction:column;}
    .chat-head{display:flex;align-items:center;gap:12px;padding:12px 16px;background:linear-gradient(90deg,#ff2e6a,#ff4f8b);color:#fff;}
    .chat-body{flex:1;padding:14px;overflow-y:auto;background:#0b1220;display:flex;flex-direction:column;}
    .msg{padding:10px 14px;margin:8px 0;border-radius:14px;font-size:14px;max-width:75%;}
    .msg.them{background:#1e293b;align-self:flex-start;}
    .msg.me{background:#ff2e6a;align-self:flex-end;color:#fff;}
    .chat-input{display:flex;padding:10px;background:#111827;border-top:1px solid #1f2937;}
    .chat-input input{flex:1;border:none;outline:none;border-radius:12px;padding:10px;margin-right:8px;background:#1e293b;color:#fff;}
    .chat-input button{background:#ff2e6a;border:none;padding:10px 14px;border-radius:12px;color:#fff;font-weight:600;cursor:pointer;}
    .chat-input button:hover{background:#e11d48;}

    /* MODAL RECARGA */
    .recharge-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:2000;}
    .recharge-modal.active{display:flex;}
    .recharge-card{width:360px;background:#0f172a;color:#fff;border-radius:20px;padding:20px;text-align:center;box-shadow:0 8px 25px rgba(0,0,0,.6);}
    .recharge-options{display:flex;gap:6px;margin:12px 0;}
    .recharge-tab{flex:1;padding:8px;border:none;border-radius:10px;background:#1e293b;color:#fff;cursor:pointer;}
    .recharge-tab.active{background:#ff2e6a;}
    .recharge-box{display:none;margin-top:10px;}
    .recharge-box.active{display:block;}
    .pay-btn{display:flex;align-items:center;gap:8px;justify-content:center;width:100%;padding:10px;margin:6px 0;border:none;border-radius:12px;background:#ff2e6a;color:#fff;font-weight:600;cursor:pointer;}
    .pay-btn img{width:22px;height:22px}
    .countdown{font-size:14px;margin-top:10px;color:#facc15;font-weight:600;}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header" id="mainHeader">
    <div class="header-inner container">
      <div class="brand">
        <img id="appLogo" src="https://qu.ax/PyOjt.png" style="height:36px;border-radius:8px;object-fit:contain">
        <span>ChispaLive</span>
      </div>
      <nav style="display:flex;gap:12px;align-items:center">
        <div>Monedas: <b id="coinsLabel">0</b></div>
        <button class="btn btn-primary" onclick="openRecharge()">üí≥ Recargar</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- LOGIN -->
    <section id="view-login" class="view active">
      <div class="login-card">
        <img src="https://qu.ax/PyOjt.png" class="login-logo">
        <h2>Bienvenido a <span style="color:#ff2e6a">ChispaLive</span></h2>
        <p>üéÅ Reg√≠strate y recibe <b>20 moneditas</b></p>
        <div class="form-group"><input id="loginName" class="login-input" placeholder="Nombre completo"></div>
        <div class="form-group"><input id="loginPhone" class="login-input" placeholder="N√∫mero de tel√©fono"></div>
        <button class="btn-login" onclick="doLogin()">Entrar</button>
      </div>
    </section>

    <!-- CHAT -->
    <section id="view-conversation" class="view">
      <div class="chat-card">
        <div class="chat-head">
          <button class="btn btn-ghost" type="button" onclick="go('login')">‚Üê Salir</button>
          <img id="chatAvatar" src="" style="width:40px;height:40px;border-radius:50%;object-fit:cover">
          <div>
            <div id="chatName"></div>
            <small id="chatStatus" class="small">En l√≠nea</small>
          </div>
        </div>
        <div class="chat-body" id="messages"></div>
        <div class="chat-input">
          <input id="msgText" placeholder="Escribe un mensaje (2 monedas)">
          <button id="btnSend">Enviar</button>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL RECARGA -->
  <div id="rechargeModal" class="recharge-modal">
    <div class="recharge-card">
      <h3>‚ö° Recarga tus moneditas</h3>
      <div class="recharge-options">
        <button class="recharge-tab active" onclick="showRecharge('paypal', this)">PayPal</button>
        <button class="recharge-tab" onclick="showRecharge('binance', this)">Binance</button>
        <button class="recharge-tab" onclick="showRecharge('ads', this)">Ver anuncios</button>
      </div>

      <!-- PAYPAL -->
      <div id="paypalBox" class="recharge-box active">
        <button class="pay-btn"><img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg">50 moneditas / 0,50$</button>
        <button class="pay-btn"><img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg">100 moneditas / 1$</button>
        <button class="pay-btn"><img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg">500 +20 üéÅ / 5$</button>
      </div>

      <!-- BINANCE -->
      <div id="binanceBox" class="recharge-box">
        <button class="pay-btn"><img src="https://cryptologos.cc/logos/binance-coin-bnb-logo.svg">Recargar v√≠a Binance</button>
      </div>

      <!-- ADS -->
      <div id="adsBox" class="recharge-box">
        <button class="btn btn-primary" onclick="watchAds()">üé• Ver anuncios</button>
        <div id="countdown" class="countdown"></div>
      </div>

      <button class="btn btn-ghost" onclick="closeRecharge()">Cerrar</button>
    </div>
  </div>

  <script>
    let coins=0, user=null;
    const STORAGE_KEY="chispaUser";

    function saveUser(){localStorage.setItem(STORAGE_KEY,JSON.stringify({user,coins}));}
    function loadUser(){
      const data=localStorage.getItem(STORAGE_KEY);
      if(!data)return false;
      const obj=JSON.parse(data);user=obj.user;coins=obj.coins;
      document.getElementById("coinsLabel").textContent=coins;return true;
    }

    function go(v){
      document.querySelectorAll(".view").forEach(x=>x.classList.remove("active"));
      document.getElementById("view-"+v).classList.add("active");
    }

    function doLogin(){
      const name=document.getElementById("loginName").value.trim();
      const phone=document.getElementById("loginPhone").value.trim();
      if(!name||!phone){alert("Completa todos los campos");return;}
      if(!loadUser()){coins=20;}
      user={name,phone};saveUser();
      document.getElementById("coinsLabel").textContent=coins;
      document.getElementById("mainHeader").style.display="block"; // mostrar navbar
      go("conversation");
    }

    if(loadUser()){document.getElementById("mainHeader").style.display="block";go("conversation");}

    // Enviar mensajes
    document.getElementById("btnSend").onclick=()=>{
      const txt=document.getElementById("msgText").value.trim();
      if(!txt)return;
      if(coins<2){openRecharge();return;}
      coins-=2;document.getElementById("coinsLabel").textContent=coins;
      document.getElementById("messages").innerHTML+=`<div class="msg me">${txt}</div>`;
      document.getElementById("msgText").value="";saveUser();
    };

    // Modal recarga
    function openRecharge(){document.getElementById("rechargeModal").classList.add("active");}
    function closeRecharge(){document.getElementById("rechargeModal").classList.remove("active");}
    function showRecharge(type,el){
      document.querySelectorAll(".recharge-tab").forEach(t=>t.classList.remove("active"));
      el.classList.add("active");
      document.querySelectorAll(".recharge-box").forEach(b=>b.classList.remove("active"));
      document.getElementById(type+"Box").classList.add("active");
    }

    // Ver anuncios con redirecci√≥n + contador
    function watchAds(){
      const win=window.open("https://ejemplo-pop.com","_blank");
      let secs=5;
      const countdown=document.getElementById("countdown");
      countdown.textContent="‚è≥ Espera "+secs+"s...";
      const timer=setInterval(()=>{
        secs--;countdown.textContent="‚è≥ Espera "+secs+"s...";
        if(secs<=0){clearInterval(timer);
          try{win.close();}catch(e){}
          coins+=30;document.getElementById("coinsLabel").textContent=coins;
          saveUser();closeRecharge();
          countdown.textContent="";
          alert("üéâ Ganaste 30 monedas por ver anuncios");
        }
      },1000);
    }
  </script>
</body>
</html>
