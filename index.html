<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuChat ‚Äî Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* ====== ESTILOS MODELOS ====== */
.model-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-top:30px;
}
.model-card {
  background:#fff;
  color:#000;
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 4px 20px rgba(0,0,0,.1);
  display:flex;
  flex-direction:column;
  cursor:pointer;
  transition:.2s;
}
.model-card:hover{transform:scale(1.02)}
.model-card img {
  width:100%;
  height:280px;
  object-fit:cover;
}
.model-card .info {
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.model-card .name {
  font-weight:600;
  font-size:16px;
}
.model-card .extra {
  font-size:13px;
  color:#555;
}
.model-card .online {
  display:inline-block;
  background:#27ae60;
  color:#fff;
  font-size:12px;
  padding:2px 6px;
  border-radius:6px;
  margin-left:6px;
}
.model-card .actions{
  display:flex;gap:6px;justify-content:space-around;padding:10px;background:#f8f8f8;
}
.model-card .actions img{
  width:24px;height:24px;cursor:pointer;
}

/* ====== ESTILOS GENERALES ====== */
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:Poppins,system-ui,sans-serif;background:#0b1220;color:#e9f6ff}
.container{max-width:1100px;margin:0 auto;padding:16px}
.header{position:sticky;top:0;z-index:50;background:rgba(10,18,32,.85);backdrop-filter:blur(6px);border-bottom:1px solid #132338}
.header-inner{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.dot{width:10px;height:10px;border-radius:50%;background:#ff2e6a;display:inline-block}
.btn{border:0;padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer;transition:.15s;font-size:14px}
.btn:active{transform:translateY(1px)}
.btn-primary{background:#ff2e6a;color:#fff}
.btn-ghost{background:transparent;color:#cfe7ff;border:1px solid #244362}
.input{width:100%;background:#0e192a;color:#d9eeff;border:1px solid #1f3550;border-radius:12px;padding:10px 12px}
.card{background:#0f1a2b;border:1px solid #1b3150;border-radius:18px;padding:16px;box-shadow:0 10px 32px rgba(0,0,0,.35)}
.small{color:#9bc2df;font-size:12px}
.view{display:none}.view.active{display:block}

/* ====== CHAT ====== */
.chat-card{height:calc(100vh - 80px);display:flex;flex-direction:column}
.chat-head{display:flex;align-items:center;gap:10px;border-bottom:1px solid #1b3150;padding:10px;background:#0f1a2b}
.chat-body{flex:1;overflow:auto;display:flex;flex-direction:column;gap:8px;padding:10px 2px}
.msg{max-width:70%;padding:10px 14px;border-radius:18px;line-height:1.35;font-size:15px;animation:floatIn .25s ease}
.msg.you{align-self:flex-end;background:#12253c}
.msg.them{align-self:flex-start;background:#0c1728}
.typing{color:#99c7ff;font-size:12px;padding:6px 0;display:none}
.typing.on{display:block}
.chat-input{display:flex;gap:8px;align-items:center;padding:10px;border-top:1px solid #1b3150;background:#0f1a2b}
.chat-input .input{flex:1}
@keyframes floatIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-inner container">
    <div class="brand"><span class="dot"></span> TuChat ‚≠ê</div>
    <nav style="display:flex;gap:12px;align-items:center">
      <div>Monedas: <b id="coinsLabel">0</b></div>
      <button class="btn btn-ghost" data-go="chat">Chat</button>
      <button class="btn btn-ghost" data-go="profile">Perfil</button>
    </nav>
  </div>
</header>

<main class="container">
  <!-- LISTA DE MODELOS -->
  <section id="view-chat" class="view active">
    <h3>Modelos</h3>
    <div class="model-grid" id="chatList"></div>
  </section>

  <!-- CHAT SOLO -->
  <section id="view-conversation" class="view">
    <div class="card chat-card">
      <div class="chat-head">
        <button class="btn btn-ghost" onclick="go('chat')">‚Üê Volver</button>
        <img id="chatAvatar" src="" style="width:40px;height:40px;border-radius:50%;object-fit:cover">
        <div>
          <div id="chatName"></div>
          <small id="chatStatus" class="small">En l√≠nea</small>
        </div>
      </div>
      <div class="chat-body" id="messages"></div>
      <div class="typing" id="typingHint">Est√° escribiendo‚Ä¶</div>
      <div class="chat-input">
        <input class="input" id="msgText" placeholder="Escribe un mensaje (2 monedas)"/>
        <button class="btn btn-primary" id="btnSend">Enviar</button>
      </div>
    </div>
  </section>

  <!-- PROFILE -->
  <section id="view-profile" class="view">
    <div class="card">
      <h3>Mi perfil</h3>
      <div class="field"><input class="input" id="pAlias" placeholder="Alias"/></div>
      <div class="field"><input class="input" id="pStatus" placeholder="Estado"/></div>
      <button class="btn btn-primary" id="btnSaveProfile">Guardar</button>
    </div>
  </section>
</main>

<script>
/* ===== Helpers DB ===== */
const DB={get:(k,f=null)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};
const START_COINS=50, COIN_PER_MSG=2;
if(!DB.get('models'))DB.set('models',[
  {id:'m1',name:'Luna',edad:22,pais:'Venezuela',desc:'Tierna y juguetona',img:'https://picsum.photos/300/400?1'}
]);

/* ===== Router ===== */
const views={chat:'view-chat',profile:'view-profile',conversation:'view-conversation'};
function go(v){Object.values(views).forEach(id=>document.getElementById(id).classList.remove('active'));document.getElementById(views[v]).classList.add('active');}
document.querySelectorAll('[data-go]').forEach(b=>b.onclick=()=>go(b.dataset.go));

/* ===== Simular sesi√≥n directa ===== */
let session={alias:'Usuario',coins:START_COINS};

/* ===== Perfil ===== */
document.getElementById('btnSaveProfile').onclick=()=>{if(session)session.alias=document.getElementById('pAlias').value};

/* ===== Renderizar modelos ===== */
const coinsLabel=document.getElementById('coinsLabel');
function renderModels(){
  coinsLabel.textContent=session?.coins||0;
  const list=document.getElementById('chatList');list.innerHTML='';
  DB.get('models',[]).forEach(m=>{
    const age=m.edad||20;
    const pais=m.pais||'Pa√≠s';
    const d=document.createElement('div');
    d.className='model-card';
    d.innerHTML=`
      <img src="${m.img}">
      <div class="info">
        <div class="name">${m.name} <span class="online">‚óè Online</span></div>
        <div class="extra">${age} a√±os ¬∑ ${pais}</div>
        <div class="small">${m.desc}</div>
      </div>
      <div class="actions">
        <img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" title="Me gusta">
        <img src="https://cdn-icons-png.flaticon.com/512/1034/1034124.png" title="Mensaje">
      </div>
    `;
    d.onclick=()=>openChat(m);
    list.appendChild(d);
  });
}

/* ===== Chat ===== */
let currentModel=null;
const messages=document.getElementById('messages'), typingHint=document.getElementById('typingHint');
function openChat(m){
  currentModel=m;
  document.getElementById('chatAvatar').src=m.img;
  document.getElementById('chatName').textContent=m.name;
  document.getElementById('chatStatus').textContent='En l√≠nea';
  messages.innerHTML=`<div class="msg them">Holi ${session.alias} üíï soy ${m.name}, ¬øquieres jugar?</div>`;
  go('conversation');
}

document.getElementById('btnSend').onclick=()=>{
  if(!currentModel)return;
  const val=document.getElementById('msgText').value.trim();
  if(!val)return;
  if(session.coins<COIN_PER_MSG){alert('Sin monedas');return;}
  session.coins-=COIN_PER_MSG;coinsLabel.textContent=session.coins;
  messages.innerHTML+=`<div class="msg you">${val}</div>`;
  document.getElementById('msgText').value='';
  typingHint.classList.add('on');
  setTimeout(()=>{
    typingHint.classList.remove('on');
    messages.innerHTML+=`<div class="msg them">Me encanta üòç</div>`;
  },3000);
};

renderModels();
</script>
</body>
</html>
