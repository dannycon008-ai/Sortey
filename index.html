<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuChat ‚Äî Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* ====== ESTILOS GLOBALES ====== */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Poppins,system-ui,sans-serif;background:#0b1220;color:#e9f6ff}
a{color:inherit;text-decoration:none}
.hidden{display:none!important}
.container{max-width:1100px;margin:0 auto;padding:16px}
.view{display:none}
.view.active{display:block}

/* HEADER */
.header{position:sticky;top:0;z-index:50;background:rgba(10,18,32,.85);backdrop-filter:blur(6px);border-bottom:1px solid #132338}
.header-inner{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.dot{width:10px;height:10px;border-radius:50%;background:#ff2e6a;display:inline-block}
nav{display:flex;gap:12px;align-items:center}
.coins-label{font-weight:600;color:#ffb020}

/* BOTONES */
.btn{border:0;padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer;transition:.15s}
.btn:active{transform:translateY(1px)}
.btn-primary{background:#ff2e6a;color:#fff}
.btn-ghost{background:transparent;color:#cfe7ff;border:1px solid #244362}

/* LISTA DE MODELOS */
.model-list{display:grid;gap:14px;margin-top:20px}
.model-item{display:flex;gap:12px;align-items:center;padding:12px;border:1px solid #203a5d;background:#0c1728;border-radius:14px;cursor:pointer;transition:.2s}
.model-item:hover{background:#12253c}
.model-item img{width:60px;height:60px;border-radius:12px;object-fit:cover}
.small{color:#9bc2df;font-size:12px}

/* CHAT */
.chat-card{height:calc(100vh - 60px);display:flex;flex-direction:column;background:#0f1a2b;border:1px solid #1b3150;border-radius:18px}
.chat-head{display:flex;align-items:center;gap:10px;border-bottom:1px solid #1b3150;padding:10px;background:#0f1a2b}
.chat-head img{width:40px;height:40px;border-radius:50%;object-fit:cover}
.chat-body{flex:1;overflow:auto;display:flex;flex-direction:column;gap:8px;padding:12px}
.msg{max-width:70%;padding:10px 14px;border-radius:16px;line-height:1.35;font-size:15px;animation:floatIn .3s ease}
.msg.you{align-self:flex-end;background:#12253c}
.msg.them{align-self:flex-start;background:#ff2e6a;color:#fff}
.typing{color:#99c7ff;font-size:12px;padding:6px 0;display:none}
.typing.on{display:block}
.chat-input{display:flex;gap:8px;align-items:center;padding:10px;border-top:1px solid #1b3150;background:#0f1a2b}
.chat-input .input{flex:1}
.input{width:100%;background:#0e192a;color:#d9eeff;border:1px solid #1f3550;border-radius:12px;padding:12px 14px}

@keyframes floatIn{from{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-inner container">
    <div class="brand"><span class="dot"></span> TuChat ‚≠ê</div>
    <nav>
      <span class="coins-label">üí∞ <span id="coinsLabel">0</span></span>
      <button class="btn btn-ghost" data-go="chat">Chat</button>
      <button class="btn btn-ghost" data-go="profile">Perfil</button>
    </nav>
  </div>
</header>

<main class="container">
  <!-- LISTA DE MODELOS -->
  <section id="view-chat" class="view active">
    <h3>Modelos</h3>
    <div class="model-list" id="chatList"></div>
  </section>

  <!-- CHAT INDIVIDUAL -->
  <section id="view-conversation" class="view">
    <div class="chat-card">
      <div class="chat-head">
        <button class="btn btn-ghost" onclick="go('chat')">‚Üê Volver</button>
        <img id="chatAvatar" src="">
        <div>
          <div id="chatName" style="font-weight:600"></div>
          <small id="chatStatus" class="small">En l√≠nea</small>
        </div>
      </div>
      <div class="chat-body" id="messages"></div>
      <div class="typing" id="typingHint">Est√° escribiendo‚Ä¶</div>
      <div class="chat-input">
        <input class="input" id="msgText" placeholder="Escribe un mensaje (2 monedas)"/>
        <button class="btn btn-primary" id="btnSend">Enviar</button>
      </div>
    </div>
  </section>

  <!-- PERFIL -->
  <section id="view-profile" class="view">
    <div class="card">
      <h3>Mi perfil</h3>
      <div class="field"><input class="input" id="pAlias" placeholder="Alias"/></div>
      <div class="field"><input class="input" id="pStatus" placeholder="Estado"/></div>
      <button class="btn btn-primary" id="btnSaveProfile">Guardar</button>
    </div>
  </section>
</main>

<script>
/* ===== Helpers DB ===== */
const DB={get:(k,f=null)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};
const START_COINS=50, COIN_PER_MSG=2;
if(!DB.get('models'))DB.set('models',[{id:'m1',name:'Luna',desc:'Tierna y juguetona',img:'https://picsum.photos/300/400?1'}]);

/* ===== Router ===== */
const views={chat:'view-chat',profile:'view-profile',conversation:'view-conversation'};
function go(v){Object.values(views).forEach(id=>document.getElementById(id).classList.remove('active'));document.getElementById(views[v]).classList.add('active');}
document.querySelectorAll('[data-go]').forEach(b=>b.onclick=()=>go(b.dataset.go));

/* ===== Perfil ===== */
let session={alias:'Invitado',coins:START_COINS};
document.getElementById('pAlias').value=session.alias;
document.getElementById('btnSaveProfile').onclick=()=>{session.alias=document.getElementById('pAlias').value};

/* ===== Render Modelos ===== */
function renderModels(){
  document.getElementById('coinsLabel').textContent=session?.coins||0;
  const list=document.getElementById('chatList');list.innerHTML='';
  DB.get('models',[]).forEach(m=>{
    const d=document.createElement('div');
    d.className='model-item';
    d.innerHTML=`<img src="${m.img}">
      <div><b>${m.name}</b><div class=small>${m.desc}</div></div>`;
    d.onclick=()=>openChat(m);
    list.appendChild(d);
  });
}

/* ===== Conversaci√≥n ===== */
let currentModel=null;
const messages=document.getElementById('messages'), coinsLabel=document.getElementById('coinsLabel');

function openChat(m){
  currentModel=m;
  document.getElementById('chatAvatar').src=m.img;
  document.getElementById('chatName').textContent=m.name;
  document.getElementById('chatStatus').textContent='En l√≠nea';
  messages.innerHTML=`<div class="msg them">Holi ${session.alias} üíï soy ${m.name}, ¬øquieres jugar?</div>`;
  go('conversation');
}

document.getElementById('btnSend').onclick=()=>{
  if(!currentModel)return;
  const val=document.getElementById('msgText').value.trim();
  if(!val)return;
  if(session.coins<COIN_PER_MSG){alert('Sin monedas');return;}
  session.coins-=COIN_PER_MSG;
  coinsLabel.textContent=session.coins;
  messages.innerHTML+=`<div class="msg you">${val}</div>`;
  document.getElementById('msgText').value='';
  // Simular "visto" + respuesta
  setTimeout(()=>document.getElementById('typingHint').classList.add('on'),500);
  setTimeout(()=>{
    document.getElementById('typingHint').classList.remove('on');
    messages.innerHTML+=`<div class="msg them">Me encanta üòç</div>`;
    messages.scrollTop=messages.scrollHeight;
  },3000);
};

renderModels();
</script>
</body>
</html>
