<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Rifa Premium | Tu Diamante</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap 4 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
  <!-- Fuente Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --azul-oscuro:#005899;
      --azul-prof:#000f35;
      --azul-medio:#5d8aa6;
      --texto:#0a4975;
    }

    *{box-sizing:border-box}
    body{
      font-family:'Poppins',sans-serif;
      background:#fff;
      color:var(--texto);
      padding-top:130px; /* despega el contenido del header fijo */
    }

    /* ====== NAVBAR (m√°s finita, gradiente #000f35-blanco-#000f35) ====== */
    .navbar{
      background: linear-gradient(to right, var(--azul-prof), #ffffff, var(--azul-prof));
      padding-top:6px;
      padding-bottom:6px;
      box-shadow:0 2px 6px rgba(0,0,0,.2);
      border-bottom:2px solid var(--azul-prof);
    }
    .navbar a{ color:#fff !important; font-weight:600; }
    .navbar-brand img{
      height:100px;width:100px;border-radius:50%;object-fit:cover;
    }

    section{ padding:60px 0; }
    h2{
      font-weight:800; color:var(--azul-oscuro);
      display:flex; align-items:center; justify-content:center; gap:10px;
      text-align:center;
    }
    /* T√≠tulo espec√≠fico de boletos en #0a4975 */
    #boletos h2{ color:var(--texto); }

    /* ====== PREMIOS ====== */
    .premio-card{
      background:#fff; border-radius:15px; padding:20px;
      box-shadow:0 4px 8px rgba(0,0,0,.1); text-align:center;
    }
    .premio-card h4{
      display:flex; align-items:center; justify-content:center; gap:6px;
      font-weight:700; font-size:1.3rem;
    }
    .premio-card h4 img{ width:40px; }
    .premio-card p{ font-weight:700; font-size:20px; margin-top:10px; }

    /* ====== BOLETOS ====== */
    .tickets-container{
      border:2px solid var(--azul-oscuro);
      border-radius:12px;
      padding:20px; margin:20px auto; max-width:1200px;
      max-height:600px; overflow-y:auto; background:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.1);
      -webkit-overflow-scrolling:touch;
    }
    .tickets-grid{
      display:grid; grid-template-columns:repeat(auto-fill,minmax(70px,1fr)); gap:10px;
    }
    .ticket{
      border:2px solid var(--azul-oscuro); border-radius:20px; padding:8px;
      font-weight:600; color:var(--azul-oscuro); text-align:center; background:#fff;
      cursor:pointer; transition:all .2s; position:relative;
      will-change:transform; transform:translateZ(0);
      user-select:none;
    }
    .ticket:hover{
      background:var(--azul-medio); color:#fff; transform:translateY(-2px);
      box-shadow:0 4px 10px rgba(0,0,0,.2);
    }
    .ticket.vendido{
      background:#f8f8f8; border-color:#ccc; cursor:not-allowed;
    }
    .ticket.vendido::after{
      content:""; position:absolute; top:-5px; right:-5px; width:20px; height:20px;
      background-image:url("https://qu.ax/zcmdn.png");
      background-size:cover; background-repeat:no-repeat;
    }
    .ticket.seleccionado{
      background:var(--azul-oscuro)!important; color:#fff!important;
      border-color:#003f66!important;
    }

    /* Barra progreso */
    .progress-total{ background:#eee; border-radius:20px; height:25px; overflow:hidden; margin-bottom:15px; }
    .progress-actual{
      background:linear-gradient(90deg, var(--azul-oscuro), var(--texto));
      height:100%; width:0; transition:width 1.5s ease-in-out;
    }
    .progress-percent{ font-weight:600; }

    /* Totales seleccionados */
    #total-seleccionados p{ font-size:25px; font-weight:700; margin-bottom:.25rem; }

    /* Botones */
    .btn-primary, .btn-success{ background:var(--azul-oscuro)!important; border:none!important; }
    .btn-icon{ display:inline-flex; align-items:center; gap:6px; }
    .btn-icon img{ width:20px; height:20px; }

    /* ====== FORMULARIO ====== */
    .form-card{
      background:#fff; border-radius:15px; padding:25px; box-shadow:0 4px 8px rgba(0,0,0,.1);
    }
    .form-card h2 img{ width:40px; height:40px; object-fit:contain; }
    .form-card label{ font-weight:600; color:var(--azul-oscuro); }
    .form-card input, .form-card select{ margin-bottom:15px; border-radius:8px; }

    /* M√©todos de pago horizontales clicables */
    .metodo-pago-container{ display:flex; gap:20px; justify-content:center; flex-wrap:wrap; }
    .metodo-pago{
      display:flex; flex-direction:column; align-items:center; cursor:pointer;
      padding:12px 16px; border:2px solid var(--azul-oscuro); border-radius:12px;
      transition:all .2s; min-width:140px;
    }
    .metodo-pago:hover{ background:#f1f9ff; }
    .metodo-pago.active{ box-shadow:0 0 0 3px rgba(0,88,153,.15); }
    .metodo-pago img{ width:48px; height:48px; object-fit:contain; margin-bottom:6px; }
    .metodo-pago input{ display:none; }

    .instrucciones{
      background:#f1f9ff; border:1px solid var(--azul-oscuro);
      border-radius:10px; padding:15px; margin-top:15px; display:none;
    }

    /* Voucher preview */
    .voucher-preview{
      display:none; margin-top:10px;
    }
    .voucher-preview img{
      max-width:220px; border:2px solid var(--azul-oscuro);
      border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,.12);
    }

    /* Peque√±os helpers */
    .gap-8{ gap:8px; }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar fixed-top navbar-expand-lg d-flex align-items-center">
    <div class="container">
      <a class="navbar-brand" href="#">
        <img src="https://qu.ax/eMtjy.png" alt="Tu Diamante" />
      </a>
    </div>
  </nav>

  <!-- PREMIOS -->
  <section id="premios" class="container">
    <h2><img src="https://qu.ax/ABC123.png" alt="Logo Premios" style="width:40px;height:40px;object-fit:contain"> üéÅ PREMIOS</h2>
    <div class="row mt-4">
      <div class="col-md-4 mb-3">
        <div class="premio-card">
          <h4><img src="https://qu.ax/guAKy.png" alt="logo">Premio 1</h4>
          <p><strong>10.000 Bs</strong></p>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="premio-card">
          <h4><img src="https://qu.ax/LVLbo.png" alt="logo">Premio 2</h4>
          <p><strong>15.000 Bs</strong></p>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="premio-card">
          <h4><img src="https://qu.ax/DygfK.png" alt="logo">Premio 3</h4>
          <p><strong>30.000 Bs</strong></p>
        </div>
      </div>
    </div>
  </section>

  <!-- BOLETOS -->
  <section id="boletos" class="container">
    <h2><img src="https://qu.ax/XYZ789.png" alt="Logo lista" style="width:40px;height:40px;object-fit:contain"> üéüÔ∏è Lista de Boletos</h2>

    <div class="progress-total"><div class="progress-actual" id="progress-bar"></div></div>
    <p class="progress-percent text-center" id="progress-text">0% Vendidos</p>

    <div class="tickets-actions text-center mb-3">
      <button class="btn btn-primary btn-icon" onclick="elegirTresAlAzar()">
        <img src="https://cdn-icons-png.flaticon.com/512/833/833314.png" alt="azar">
        üé≤ Elegir 3 al azar
      </button>
    </div>

    <div class="tickets-container">
      <div id="boletos-list" class="tickets-grid"></div>
    </div>

    <div class="text-center mt-4">
      <button class="btn btn-primary btn-icon" onclick="prevPage()">
        <img src="https://qu.ax/TaLQg.png" alt="prev"> Anterior
      </button>
      <span id="page-info" class="mx-3">P√°gina 1 de 5</span>
      <button class="btn btn-primary btn-icon" onclick="nextPage()">
        <img src="https://qu.ax/ymYjd.png" alt="next"> Siguiente
      </button>
    </div>

    <div id="total-seleccionados" class="text-center mt-3"></div>
  </section>

  <!-- FORMULARIO -->
  <section id="formulario" class="container">
    <div class="form-card">
      <h2><img src="https://qu.ax/rGfpx.png" alt="Logo Datos"> üìù Datos Personales</h2>
      <form onsubmit="return confirmarCompra(event)">
        <label>Nombre y Apellido</label>
        <input id="inpNombre" type="text" class="form-control" required />
        <label>C√©dula</label>
        <input id="inpCedula" type="text" class="form-control" required />

        <label>Tel√©fono</label>
        <div class="input-group">
          <select id="selPais" class="form-control" style="max-width:110px;">
            <option value="+58">üáªüá™ +58</option>
            <option value="+57">üá®üá¥ +57</option>
            <option value="+1">üá∫üá∏ +1</option>
            <option value="+34">üá™üá∏ +34</option>
          </select>
          <input id="inpTelefono" type="tel" class="form-control" placeholder="N√∫mero de tel√©fono" required />
        </div>

        <label>√öltimos 6 d√≠gitos de la referencia de pago</label>
        <input id="inpRef6" type="text" maxlength="6" class="form-control" placeholder="Ej: 123456" required />

        <label class="mt-2">M√©todo de Pago</label>
        <div class="metodo-pago-container">
          <div class="metodo-pago" data-metodo="pago-movil" onclick="seleccionarMetodo(this)">
            <img src="https://play-lh.googleusercontent.com/1p1Y0PT24TZ9y6oYD0dkcqgg6BCGimhhH4XJ4lOUMj8m-VJ6FYEZbcMAHkYLhG7NDaY=w480-h960-rw" alt="Pago M√≥vil">
            <span>Pago M√≥vil</span>
          </div>
          <div class="metodo-pago" data-metodo="banesco" onclick="seleccionarMetodo(this)">
            <img src="https://play-lh.googleusercontent.com/JP3qF5hwz0z7z-d2PEu21dhtdb7EBlC-5XKAuE0e2zLUAjWca-ePijvcb-nAQGAa9Ng=w480-h960-rw" alt="Banesco">
            <span>Banesco</span>
          </div>
          <div class="metodo-pago" data-metodo="binance" onclick="seleccionarMetodo(this)">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/57/Binance_Logo.png" alt="Binance">
            <span>Binance</span>
          </div>
        </div>

        <div id="instrucciones" class="instrucciones"></div>

        <label class="mt-2">Comprobante de pago (imagen)</label>
        <input id="inpVoucher" type="file" accept="image/*" class="form-control-file" onchange="previewVoucher(event)" />
        <div class="voucher-preview" id="voucherPreviewBox">
          <img id="voucherPreview" alt="Voucher"/>
        </div>

        <button class="btn btn-success btn-block mt-3" type="submit">Confirmar Compra</button>
        <button class="btn btn-primary btn-block mt-2" type="button" onclick="verMisBoletos()">Ver mis Boletos</button>
      </form>
    </div>
  </section>

  <!-- VERIFICADOR -->
  <section id="verificador" class="container">
    <div class="form-card">
      <h2>üîé Verificador de Boletos</h2>
      <form onsubmit="verificarBoletos(event)">
        <label>Ingresa tu n√∫mero de tel√©fono o # de boleto</label>
        <input type="text" id="inputVerificador" class="form-control" required placeholder="Ej: 04128417632 o 0005" />
        <button class="btn btn-primary btn-block mt-3" type="submit">Verificar</button>
      </form>
      <div id="resultadoVerificador" class="mt-4" style="display:none;">
        <h5>üìã Resultados:</h5>
        <div id="detalleBoletos"></div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer-section text-center mt-5">
    <p>¬© 2025 Tu Diamante - Todos los derechos reservados.</p>
  </footer>

  <!-- JS -->
  <script>
    const TOTAL_BOLETOS = 10000;
    const POR_PAGINA = 2000;
    const PRECIO_BOLETO = 15;

    let paginaActual = 1;
    let boletos = [];
    let boletosSeleccionados = [];
    let ultimaCompraSeleccion = [];
    let metodoPagoSeleccionado = null;

    /* ========== Generar 10.000 boletos y mezclarlos (orden aleatorio) ========== */
    function generarBoletos(){
      for(let i=0;i<TOTAL_BOLETOS;i++){
        const numero = i.toString().padStart(4,'0');
        const vendido = Math.random()<0.1; // 10% vendidos fake
        boletos.push({numero, vendido});
      }
      // Mezcla Fisher-Yates
      for(let i=boletos.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [boletos[i], boletos[j]] = [boletos[j], boletos[i]];
      }
    }

    /* ========== Render de boletos (2.000 por p√°gina) ========== */
    function mostrarBoletos(){
      const contenedor = document.getElementById('boletos-list');
      contenedor.innerHTML = "";
      const inicio = (paginaActual-1)*POR_PAGINA;
      const fin = inicio + POR_PAGINA;
      const frag = document.createDocumentFragment();

      boletos.slice(inicio, fin).forEach(boleto=>{
        const div = document.createElement('div');
        div.className = "ticket" +
          (boleto.vendido ? " vendido" : "") +
          (boletosSeleccionados.includes(boleto.numero) ? " seleccionado" : "");
        div.textContent = boleto.numero;
        if(!boleto.vendido){
          div.onclick = ()=>toggleSeleccion(boleto);
        }
        frag.appendChild(div);
      });
      contenedor.appendChild(frag);

      document.getElementById('page-info').textContent =
        `P√°gina ${paginaActual} de ${Math.ceil(TOTAL_BOLETOS / POR_PAGINA)}`;

      actualizarProgreso();
      actualizarTotalSeleccionados();
    }

    function toggleSeleccion(boleto){
      if(boleto.vendido) return;
      const idx = boletosSeleccionados.indexOf(boleto.numero);
      if(idx===-1) boletosSeleccionados.push(boleto.numero);
      else boletosSeleccionados.splice(idx,1);
      mostrarBoletos();
    }

    function actualizarProgreso(){
      const vendidos = boletos.filter(b=>b.vendido).length;
      const porcentaje = Math.round((vendidos/TOTAL_BOLETOS)*100);
      document.getElementById('progress-bar').style.width = porcentaje+"%";
      document.getElementById('progress-text').textContent = `${porcentaje}% Vendidos`;
    }

    function actualizarTotalSeleccionados(){
      const box = document.getElementById('total-seleccionados');
      const cant = boletosSeleccionados.length;
      const total = cant * PRECIO_BOLETO;
      box.innerHTML = cant>0
        ? `<p><b>Boletos seleccionados:</b> ${cant}</p><p><b>Total a pagar:</b> ${total} Bs</p>`
        : "";
    }

    function nextPage(){
      if(paginaActual < TOTAL_BOLETOS/POR_PAGINA){
        paginaActual++; mostrarBoletos();
      }
    }
    function prevPage(){
      if(paginaActual>1){ paginaActual--; mostrarBoletos(); }
    }

    /* ========== Elegir 3 al azar (no vendidos) ========== */
    function elegirTresAlAzar(){
      const disponibles = boletos.filter(b=>!b.vendido).map(b=>b.numero);
      // Vac√≠a selecci√≥n actual y elige 3 nuevos aleatorios
      boletosSeleccionados = [];
      while(boletosSeleccionados.length<3 && disponibles.length){
        const i = Math.floor(Math.random()*disponibles.length);
        const num = disponibles.splice(i,1)[0];
        boletosSeleccionados.push(num);
      }
      mostrarBoletos();
    }

    /* ========== M√©todos de pago (horizontales, sin radio) ========== */
    function seleccionarMetodo(el){
      document.querySelectorAll('.metodo-pago').forEach(m=>m.classList.remove('active'));
      el.classList.add('active');
      metodoPagoSeleccionado = el.getAttribute('data-metodo');
      const box = document.getElementById('instrucciones');
      box.style.display = "block";
      if(metodoPagoSeleccionado==='pago-movil'){
        box.innerHTML = `<h5>üì± Pago M√≥vil Venezuela</h5>
          <p><b>Banco:</b> 0102 (Venezuela)<br>
          <b>Tel√©fono:</b> 0424-8417632<br>
          <b>C√©dula:</b> V-31490382<br>
          <b>Titular:</b> Angel Zabala</p>`;
      }else if(metodoPagoSeleccionado==='banesco'){
        box.innerHTML = `<h5>üè¶ Banesco</h5>
          <p><b>Cuenta:</b> 0134-xxxx-xxxx-xxxxxxx<br>
          <b>Titular:</b> Iraima Jimenez</p>`;
      }else if(metodoPagoSeleccionado==='binance'){
        box.innerHTML = `<h5>üí∞ Binance</h5>
          <p><b>Correo:</b> angelitojavier277@gmail.com<br>
          <b>Red:</b> BNB Smart Chain (BEP20)</p>`;
      }
    }

    /* ========== Preview de voucher (miniatura) ========== */
    function previewVoucher(e){
      const file = e.target.files?.[0];
      if(!file) return;
      const url = URL.createObjectURL(file);
      const img = document.getElementById('voucherPreview');
      img.src = url;
      document.getElementById('voucherPreviewBox').style.display = 'block';
    }

    /* ========== Confirmar compra (m√≠nimo 3) y marcar vendidos ========== */
    function confirmarCompra(ev){
      ev.preventDefault();

      if(boletosSeleccionados.length < 3){
        alert("‚ö†Ô∏è La compra m√≠nima es de 3 boletos.");
        return false;
      }
      if(!metodoPagoSeleccionado){
        alert("‚ö†Ô∏è Selecciona un m√©todo de pago.");
        return false;
      }

      const nombre = document.getElementById('inpNombre').value.trim();
      const cedula = document.getElementById('inpCedula').value.trim();
      const telCode = document.getElementById('selPais').value;
      const telNum = document.getElementById('inpTelefono').value.trim();
      const telefono = (telCode + telNum).replace(/\s+/g,'');
      const ref6 = document.getElementById('inpRef6').value.trim();

      // Guardamos la √∫ltima selecci√≥n para "Ver mis boletos"
      ultimaCompraSeleccion = [...boletosSeleccionados];

      // Marcar vendidos
      const setSeleccion = new Set(boletosSeleccionados);
      boletos.forEach(b=>{ if(setSeleccion.has(b.numero)) b.vendido = true; });

      // Agregar a compras simuladas (para que funcione el verificador por tel√©fono)
      comprasSimuladas.push({
        nombre, cedula, telefono: telNum.startsWith('0') ? telNum : telNum, // guardamos sin el +c√≥digo para b√∫squeda simple
        boletos:[...boletosSeleccionados],
        ref6, metodo:metodoPagoSeleccionado
      });

      alert(`‚úÖ Compra confirmada:\n- Boletos: ${boletosSeleccionados.length}\n- Total: ${boletosSeleccionados.length * PRECIO_BOLETO} Bs\n- Ref: ${ref6}`);

      // Limpiar selecci√≥n y refrescar
      boletosSeleccionados = [];
      mostrarBoletos();
      return true;
    }

    /* ========== Ver mis boletos (lleva al verificador con la √∫ltima compra) ========== */
    function verMisBoletos(){
      if(ultimaCompraSeleccion.length===0){
        alert("‚ö†Ô∏è Primero selecciona y confirma al menos 3 boletos.");
        return;
      }
      const resultadoDiv = document.getElementById("resultadoVerificador");
      const detalleDiv = document.getElementById("detalleBoletos");
      detalleDiv.innerHTML = `
        <p><b>Boletos seleccionados:</b></p>
        <div class="d-flex flex-wrap gap-8">
          ${ultimaCompraSeleccion.map(n=>`<div class="ticket seleccionado">${n}</div>`).join("")}
        </div>
        <p class="mt-3"><b>Total Pagado:</b> ${ultimaCompraSeleccion.length * PRECIO_BOLETO} Bs</p>
      `;
      resultadoDiv.style.display = "block";
      document.getElementById("verificador").scrollIntoView({ behavior:"smooth" });
    }

    /* ========== Verificador (por tel√©fono o #boleto) ========== */
    const comprasSimuladas = [
      { nombre:"Juan P√©rez",   cedula:"V-12345678", telefono:"04128417632", boletos:["0001","0002","0005"] },
      { nombre:"Iraima Jimenez",cedula:"V-87654321", telefono:"04125556677", boletos:["0100","0101","0102","0103"] },
      { nombre:"Angel Zabala", cedula:"V-31490382", telefono:"04129998877", boletos:["0500"] }
    ];

    function verificarBoletos(ev){
      ev.preventDefault();
      const valor = document.getElementById("inputVerificador").value.trim();
      const resultadoDiv = document.getElementById("resultadoVerificador");
      const detalleDiv = document.getElementById("detalleBoletos");

      let compra = comprasSimuladas.find(c=>c.telefono===valor);
      if(!compra){
        for(const c of comprasSimuladas){
          if(c.boletos.includes(valor)){ compra = c; break; }
        }
      }

      if(compra){
        detalleDiv.innerHTML = `
          <p><b>Nombre:</b> ${compra.nombre}</p>
          <p><b>C√©dula:</b> ${compra.cedula}</p>
          <p><b>Tel√©fono:</b> ${compra.telefono}</p>
          <p><b>Boletos comprados:</b></p>
          <div class="d-flex flex-wrap gap-8">
            ${compra.boletos.map(n=>`<div class="ticket">${n}</div>`).join("")}
          </div>
          <p class="mt-3"><b>Total Pagado:</b> ${compra.boletos.length * ${PRECIO_BOLETO}} Bs</p>
        `;
      }else{
        detalleDiv.innerHTML = `<p class="text-danger">‚ùå No se encontraron boletos asociados.</p>`;
      }

      resultadoDiv.style.display = "block";
    }

    /* ====== Init ====== */
    generarBoletos();
    mostrarBoletos();
  </script>
</body>
</html>
