<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rifas — Tu Diamante</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/css/intlTelInput.css" />

  <style>
  :root{
    --bg:#ffffff; 
    --ink:#111827; 
    --muted:#6b7280; 
    --accent:#0A4975;     
    --border:#e5e7eb; 
    --chip:#f3f4f6; 
    --warn:#ef4444;
    --diamond-url: url('https://qu.ax/zcmdn.png');
  }

  /* Flechas de paginación */
  .pagination-bottom {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    margin-top: 12px;
  }
  .page-btn {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: #0A4975;
    color: #fff;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  .page-btn:hover { background: #07324e; }
  #pageInfo { font-weight: bold; color: #111827; }

  body{margin:0; background:var(--bg); color:var(--ink); font-family:"Inter",sans-serif; font-weight:800;}
  .container{max-width:1200px; margin:0 auto; padding:16px; display:flex; flex-direction:column; align-items:center;}

  /* Header */
  .app-title{display:flex; justify-content:center; margin:20px 0 10px;}
  .app-title img{width:140px; height:140px; border-radius:50%; object-fit:cover;}

  /* Progreso */
  .progress-info{display:flex; flex-direction:column; align-items:center; gap:8px; margin:8px 0 20px; width:100%;}
  .bar{height:14px; background:#f3f4f6; border-radius:999px; overflow:hidden; border:1px solid var(--border); width:min(640px,100%);} 
  .bar>span{display:block; height:100%; background:var(--accent); width:0%; transition:width 1s ease-in-out;}
  .progress-stats{color:var(--muted); font-size:14px; font-weight:700; text-align:center;}

  /* Paneles */
  .panel{background:#fff; border:1px solid var(--border); border-radius:16px; padding:16px; width:100%; text-align:center;}
  .panel h2{margin:0 0 12px 0; font-size:28px; text-transform:uppercase; color:var(--accent);}
  .subtle{color:var(--muted); font-size:14px;}

  /* Lista de boletos */
  .square-wrap{
    width:100%; max-width:780px; aspect-ratio:1/1; border:2px solid var(--border);
    border-radius:20px; overflow:hidden; display:flex; margin:0 auto; 
    box-shadow:0 4px 15px rgba(0,0,0,0.08);
  }
  .ticket-grid{display:grid; grid-template-columns: repeat(6,1fr); gap:6px; padding:10px;}
  @media(min-width:480px){ .ticket-grid{ grid-template-columns: repeat(8,1fr);} }
  @media(min-width:768px){ .ticket-grid{ grid-template-columns: repeat(10,1fr);} }
  @media(min-width:1024px){ .ticket-grid{ grid-template-columns: repeat(12,1fr);} }

  .ticket {
    display:flex; align-items:center; justify-content:center;
    aspect-ratio:1/1;
    border:1px solid var(--border);
    border-radius:10px;
    background:#fff;
    font-weight:800;
    font-size: clamp(12px, 2vw, 18px);
    cursor:pointer;
    transition: transform 0.2s ease, background 0.2s ease;
    color:#0A4975;
  }
  .ticket:hover{background:#f0f9ff; transform:scale(1.05);}
  .ticket.selected{background:#dbeafe; border-color:#bfdbfe; transform:scale(0.95);}

  /* SOLO vendidos */
  .ticket.sold {
    position: relative;
    background: #e5e7eb;
    color: transparent;
    border: 1px solid #cbd5e1;
    cursor: not-allowed;
  }
  .ticket.sold::after {
    content:"";
    position:absolute;
    inset:0;
    background-image: var(--diamond-url);
    background-size: 70%;
    background-position:center;
    background-repeat:no-repeat;
    opacity:1;
  }

  /* Diamantes de "Mis boletos" */
  .big-diamonds{display:flex; flex-wrap:wrap; gap:18px; justify-content:center;}
  .big-diamond{width:120px; height:120px; display:flex; align-items:center; justify-content:center;
    color:#fff; font-size:20px; font-weight:800;
    background-image:var(--diamond-url); background-size:cover; background-position:center;
    border-radius:16px; box-shadow:0 8px 18px rgba(0,0,0,.12);
  }
  </style>
</head>
<body>
  <div class="container">
    <header class="app-title">
      <img src="https://qu.ax/OVJvi.png" alt="Logo redondo">
    </header>

    <section class="progress-info">
      <div class="bar"><span id="soldBar"></span></div>
      <div class="progress-stats">Vendidos: <b id="soldCount">0</b> / 10.000 — <b id="soldPct">0%</b></div>
    </section>

    <!-- Lista de boletos -->
    <section class="panel tickets-panel">
      <h2>Lista de boletos</h2>
      <div class="square-wrap">
        <div class="square-inner">
          <div id="tickets" class="ticket-grid" aria-live="polite"></div>
        </div>
      </div>
      <!-- Flechas abajo -->
      <div class="pagination-bottom">
        <button class="page-btn" id="prevPage">«</button>
        <span id="pageInfo">Pag: 1/10</span>
        <button class="page-btn" id="nextPage">»</button>
      </div>
    </section>

    <!-- Mis boletos -->
    <section class="panel" id="myTicketsPanel" style="display:none; margin-top:16px;">
      <h2>Mis boletos</h2>
      <div id="myDiamonds" class="big-diamonds"></div>
    </section>
  </div>

<script>
  const TOTAL_TICKETS = 10000;
  const PAGE_SIZE = 1000;
  let currentPage = 1;
  let selected = new Set();
  const sold = new Set();

  const el = s => document.querySelector(s);
  const pad4 = n => n.toString().padStart(4,'0');

  function updateProgress(){
    const pct = Math.round((sold.size / TOTAL_TICKETS) * 100);
    el('#soldBar').style.width = pct + '%';
    el('#soldCount').textContent = sold.size.toLocaleString();
    el('#soldPct').textContent = pct + '%';
  }

  function pageRange(page){
    const start = (page-1)*PAGE_SIZE;
    const end = start + PAGE_SIZE - 1;
    return [start, end];
  }

  function renderTickets(){
    const grid = el('#tickets');
    grid.innerHTML='';
    const [start, end] = pageRange(currentPage);
    for(let n=start;n<=end;n++){
      const btn=document.createElement('div');
      btn.className='ticket';
      btn.textContent=pad4(n);
      if(sold.has(n)){
        btn.classList.add('sold');
        btn.title="Boleto ya ha sido vendido";
      } else if(selected.has(n)){
        btn.classList.add('selected');
      } else {
        btn.addEventListener('click', ()=>{ selected.add(n); renderTickets(); });
      }
      grid.appendChild(btn);
    }
    el('#pageInfo').textContent=`Pag: ${currentPage}/10`;
  }

  function changePage(dir){
    if(dir==='prev' && currentPage>1) currentPage--;
    if(dir==='next' && currentPage<10) currentPage++;
    renderTickets();
  }

  window.addEventListener('DOMContentLoaded', ()=>{
    updateProgress();
    renderTickets();
    el('#prevPage').addEventListener('click', ()=>changePage('prev'));
    el('#nextPage').addEventListener('click', ()=>changePage('next'));
  });
</script>
</body>
</html>
