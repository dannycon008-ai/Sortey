<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TU DIAMANTE 💎</title>
  <!-- Fuente Sans Serif (bold/extra-bold) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;800&display=swap" rel="stylesheet">
  <!-- Tel input (banderas y código de país) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/css/intlTelInput.css" />
  <style>
    :root{
      --bg:#ffffff; --ink:#111827; --muted:#6b7280; --brand:#111827; --accent:#0ea5e9; --ok:#16a34a; --warn:#ef4444; --border:#e5e7eb; --chip:#f3f4f6;
    }
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--ink); font-family:"Inter",system-ui,sans-serif; font-weight:800;}
    .container{max-width:1200px; margin:0 auto; padding:16px;}

    /* Header */
    .app-title{display:flex; justify-content:center; align-items:center; text-align:center;}
    .app-title h1{margin:0; font-size:42px; letter-spacing:2px; text-transform:uppercase;}

    /* Progreso */
    .progress-info{display:flex; flex-direction:column; align-items:center; gap:8px; margin:14px 0 20px;}
    .bar{height:14px; background:#f3f4f6; border-radius:999px; overflow:hidden; border:1px solid var(--border); width:min(640px,100%);} 
    .bar>span{display:block; height:100%; background:linear-gradient(90deg,var(--accent),#22c55e); width:0%; transition:width 1s ease-in-out;}
    .progress-stats{color:var(--muted); font-size:14px; font-weight:700;}

    /* Layout */
    .grid-layout{display:grid; grid-template-columns:1fr; gap:16px;}
    @media(min-width:1024px){ .grid-layout{ grid-template-columns:2fr 1fr; } }

    .panel{background:#fff; border:1px solid var(--border); border-radius:16px; padding:16px; box-shadow:0 1px 2px rgba(0,0,0,.04);} 
    .panel h2{text-align:center; margin:0 0 12px 0; font-size:36px; text-transform:uppercase;}
    .subtle{color:var(--muted); font-size:14px;}

    /* Toolbar lista */
    .tickets-toolbar{display:flex; flex-wrap:wrap; align-items:center; gap:10px; margin-bottom:10px;}
    .search{position:relative; flex:1 1 220px;}
    .search input{width:100%; border:1px solid var(--border); border-radius:999px; padding:10px 36px 10px 40px; font-size:14px; outline:none;}
    .search svg{position:absolute; left:12px; top:50%; transform:translateY(-50%);} 
    .page-controls{display:flex; gap:6px; align-items:center;}

    /* Botones */
    .btn{border:1px solid var(--border); background:#fff; border-radius:12px; padding:10px 14px; font-weight:800; cursor:pointer; transition:.2s;}
    .btn:hover{transform:translateY(-1px);} 
    .btn.primary{background:var(--brand); color:#fff; border-color:var(--brand);} 
    .btn.secondary{background:#f8fafc;}
    .btn[disabled]{opacity:.6; cursor:not-allowed;}

    /* Cuadrado lista */
    .square-wrap{width:100%; aspect-ratio:1/1; border:1px solid var(--border); border-radius:16px; overflow:hidden; display:flex;}
    .square-inner{flex:1; overflow:auto;}

    .ticket-grid{display:grid; grid-template-columns: repeat(6, 1fr); gap:6px; padding:10px;}
    @media(min-width:480px){ .ticket-grid{ grid-template-columns: repeat(8, 1fr);} }
    @media(min-width:768px){ .ticket-grid{ grid-template-columns: repeat(10, 1fr);} }
    @media(min-width:1024px){ .ticket-grid{ grid-template-columns: repeat(12, 1fr);} }
    @media(min-width:1280px){ .ticket-grid{ grid-template-columns: repeat(14, 1fr);} }

    .ticket{user-select:none; text-align:center; padding:8px 0; border:1px solid var(--border); border-radius:10px; background:#fff; font-weight:800; font-size:14px; cursor:pointer; transition:.15s;}
    .ticket:hover{background:#f9fafb;}
    .ticket.sold{background:#fee2e2; color:#991b1b; border-color:#fecaca; cursor:not-allowed;}
    .ticket.selected{background:#dbeafe; border-color:#bfdbfe;}

    .chips{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px;}
    .chip{display:inline-flex; align-items:center; gap:6px; background:var(--chip); border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-weight:800;}
    .chip button{border:none; background:transparent; cursor:pointer; font-size:16px; line-height:1;}

    /* Total compacto y sin amontonarse */
    .totals{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; margin-top:10px;}
    .totals-group{display:flex; flex-wrap:wrap; gap:8px; align-items:center;}
    .tag{background:#eef2ff; color:#3730a3; border:1px solid #e0e7ff; font-weight:800; border-radius:999px; padding:6px 10px;}
    .note{margin-top:8px; font-size:14px; color:#0f172a;}
    .note.warn{color:#b91c1c;}

    /* Formulario */
    .form{display:grid; gap:10px; grid-template-columns:1fr;}
    @media(min-width:640px){ .form{ grid-template-columns:1fr 1fr; } }
    .field{display:flex; flex-direction:column; gap:6px;}
    .field label{font-weight:800;}
    .field input, .field select{border:1px solid var(--border); border-radius:12px; padding:10px 12px; font-size:14px; outline:none; font-weight:700;}

    .pay-methods{display:flex; gap:10px; flex-wrap:wrap;}
    .pm-card{flex:1 1 160px; min-width:160px; border:1px solid var(--border); border-radius:14px; padding:12px; cursor:pointer; display:flex; align-items:center; gap:10px;}
    .pm-card.active{outline:2px solid var(--accent);} 
    .pm-card img{width:28px; height:28px; object-fit:contain;}
    .pm-details{background:#f8fafc; border:1px dashed var(--border); border-radius:12px; padding:12px;}

    /* Diamantes */
    .diamonds{display:flex; flex-wrap:wrap; gap:14px;}
    .diamond{width:90px; height:90px; display:flex; align-items:center; justify-content:center; color:#fff; font-size:18px; font-weight:800; background:linear-gradient(135deg,#0ea5e9,#111827); clip-path:polygon(50% 0%, 90% 35%, 100% 65%, 50% 100%, 0% 65%, 10% 35%); box-shadow:0 6px 16px rgba(0,0,0,.15);}

    /* CTA ver boletos */
    .mytickets-cta{display:none; margin-top:12px; text-align:right;}

    /* Footer contacto */
    .site-footer{margin-top:22px; border-top:1px solid var(--border);}
    .contact{background:#0ea5e9; color:#fff; border-radius:16px; padding:18px; display:grid; gap:14px;}
    .contact h3{margin:0; text-transform:uppercase; letter-spacing:1px; font-size:18px;}
    .row{display:flex; flex-wrap:wrap; gap:12px; align-items:center;}
    .row a{display:inline-flex; align-items:center; gap:8px; text-decoration:none; color:#fff; font-weight:800; border:1px solid rgba(255,255,255,.3); padding:8px 12px; border-radius:999px;}
    .row a:hover{background:rgba(255,255,255,.1);} 
    .icon{width:18px; height:18px; display:inline-block;}
  </style>
</head>
<body>
  <div class="container">
    <header class="app-title">
      <h1>TU DIAMANTE 💎</h1>
    </header>

    <!-- Progreso de ventas -->
    <section class="progress-info">
      <div class="bar"><span id="soldBar"></span></div>
      <div class="progress-stats">Vendidos: <b id="soldCount">0</b> / 10.000 — <b id="soldPct">0%</b></div>
    </section>

    <div class="grid-layout">
      <!-- LISTA -->
      <section class="panel">
        <h2>Lista de boletos</h2>
        <div class="subtle"></div>
        <div class="tickets-toolbar">
          <div class="search">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            <input id="searchInput" type="text" inputmode="numeric" maxlength="4" placeholder=" escribe número " />
          </div>
          <div class="page-controls">
            <span class="subtle">Página:</span>
            <div id="pagination"></div>
          </div>
        </div>
        <div class="square-wrap">
          <div class="square-inner">
            <div id="tickets" class="ticket-grid" aria-live="polite"></div>
          </div>
        </div>
        <div class="totals">
          <div class="totals-group">
            <span class="tag">Precio: <b>15 Bs</b></span>
            <span class="tag">Seleccionados: <b id="selCount">0</b></span>
            <span class="tag">Total: <b id="totalAmount">0 Bs</b></span>
          </div>
          <button id="btnRandom" class="btn primary" title="Generar 3 boletos a la suerte">🎲 Generar aleatorios</button>
        </div>
        <div id="minMsg" class="note warn" style="display:none;">Compra mínima 3 boletos.</div>
        <div class="mytickets-cta" id="myTicketsCta">
          <button class="btn secondary" id="btnSeeMine">Ver mis boletos</button>
        </div>
        <div id="selectedChips" class="chips"></div>
      </section>

      <!-- FORMULARIO -->
      <section class="panel">
        <h2>Datos personales & pago</h2>
        <form id="buyForm" class="form" autocomplete="off">
          <div class="field">
            <label for="name">Nombre y apellido</label>
            <input id="name" type="text" placeholder="Ej: Ana Pérez" required />
          </div>
          <div class="field">
            <label for="idnum">Cédula</label>
            <input id="idnum" type="text" placeholder="V-12345678" required />
          </div>
          <div class="field" style="grid-column:1 / -1;">
            <label for="phone">Teléfono</label>
            <input id="phone" type="tel" placeholder="Ingresa tu número" required />
          </div>
          <div class="field">
            <label for="ref6">Últimos 6 dígitos de la referencia</label>
            <input id="ref6" type="text" inputmode="numeric" maxlength="6" placeholder="Ej: 123456" required />
          </div>
          <div class="field">
            <label for="proof">Comprobante de pago</label>
            <input id="proof" type="file" accept="image/*,application/pdf" required />
          </div>

          <div class="field" style="grid-column:1 / -1;">
            <label>Métodos de pago</label>
            <div class="pay-methods" id="payMethods"></div>
          </div>
          <div id="payDetails" class="pm-details" style="display:none;"></div>

          <div style="grid-column:1 / -1; display:flex; gap:10px; align-items:center; justify-content:flex-end;">
            <button type="button" id="btnConfirm" class="btn primary">Confirmar compra</button>
          </div>
        </form>
      </section>
    </div>

    <!-- MIS BOLETOS (diamantes) -->
    <section class="panel" id="myTicketsPanel" style="display:none; margin-top:16px;">
      <h2>Mis boletos</h2>
      <div id="myTicketsInfo" class="subtle" style="margin-bottom:8px;"></div>
      <div id="myDiamonds" class="diamonds"></div>
    </section>

    <!-- Verificador -->
    <section class="panel" style="margin-top:16px;">
      <h2>Verificador de boletos</h2>
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        <input id="verifyInput" style="flex:1 1 260px; border:1px solid var(--border); border-radius:12px; padding:10px 12px; font-weight:700;" placeholder="Teléfono o # de boleto (0000–9999)" />
        <button id="btnVerify" class="btn secondary" type="button">🔎 Verificar</button>
      </div>
      <div id="verifyOut" style="margin-top:10px;"></div>
    </section>

    <!-- CONTACTO & SÍGUENOS -->
    <section class="site-footer">
      <div class="contact">
        <h3>Contacto</h3>
        <div class="row">
          <a id="waLink" href="#" target="_blank" rel="noopener">
            <span class="icon">📱</span> WhatsApp
          </a>
          <a id="mapLink" href="#" target="_blank" rel="noopener">
            <span class="icon">📍</span> El tigre EDO Anzoategui 
          </a>
        </div>
        <h3>Síguenos</h3>
        <div class="row">
          <a id="fbLink" href="#" target="_blank" rel="noopener">📘 Facebook</a>
          <a id="igLink" href="#" target="_blank" rel="noopener">📸 Instagram</a>
        </div>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/js/intlTelInput.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/js/utils.js"></script>
  <script>
    /* ==========================
       CONFIG editable
       ========================== */
    const PRICE_PER_TICKET = 15; // Bs
    const TOTAL_TICKETS = 10000; // 0000-9999
    const PAGE_SIZE = TOTAL_TICKETS / 5; // 2000 por página

    // URLs de contacto (cámbialas por las tuyas)
    const WA_URL = 'https://wa.me/584248911769';
    const MAPS_URL = 'https://maps.google.com/?q=Maracay+Aragua+Venezuela';
    const FB_URL = 'https://facebook.com/tu_pagina';
    const IG_URL = 'https://instagram.com/tu_pagina';

    // Métodos de pago (logos por URL y datos)
    const PAYMENT_METHODS = [
      { key: 'pago_movil_ve', name: 'Pago móvil Venezuela', logo: 'https://yt3.googleusercontent.com/3ME3g2bCspqXCDaWLDasexj6y-JYW4ibgTSGDRq0Eua3JCOzd6fR00G1v3qIphKbuKBflB2qbg=s900-c-k-c0x00ffffff-no-rj', details: ['Banco: 0102', 'Teléfono: 0424-8417632', 'Cédula/RIF: V-31490382', 'Titular: Angel Zabala'] },
      { key: 'pago_movil_banesco', name: 'Pago móvil Banesco', logo: 'https://play-lh.googleusercontent.com/JP3qF5hwz0z7z-d2PEu21dhtdb7EBlC-5XKAuE0e2zLUAjWca-ePijvcb-nAQGAa9Ng=w240-h480-rw', details: ['Banco: 0134', 'Teléfono: 0414-8516619', 'Cédula/RIF: V-14884043', 'Titular:Iraima Jimenez'] },
      { key: 'binance', name: 'Binance', logo: 'https://upload.wikimedia.org/wikipedia/commons/5/57/Binance_Logo.png', details: ['Correo: angelitojavier277@gmail.com', 'Nota: Adjunta el hash/ID de transacción'] }
    ];

    /* ==========================
       Estado + storage
       ========================== */
    const el = s => document.querySelector(s);
    const els = s => Array.from(document.querySelectorAll(s));

    const soldKey = 'rifas_soldTickets_v2';
    const ordersKey = 'rifas_orders_v2';

    const getSold = () => new Set(JSON.parse(localStorage.getItem(soldKey) || '[]'));
    const setSold = (set) => localStorage.setItem(soldKey, JSON.stringify([...set]));
    const getOrders = () => JSON.parse(localStorage.getItem(ordersKey) || '[]');
    const setOrders = (arr) => localStorage.setItem(ordersKey, JSON.stringify(arr));

    const pad4 = n => n.toString().padStart(4, '0');

    let selected = new Set();
    let currentPage = 1; // 1..5
    let iti = null; // intl-tel-input
    let chosenPayKey = null;

    /* ==========================
       Progreso
       ========================== */
    function updateProgress(){
      const sold = getSold();
      const pct = Math.round((sold.size / TOTAL_TICKETS) * 100);
      el('#soldBar').style.width = pct + '%';
      el('#soldCount').textContent = sold.size.toLocaleString('es-VE');
      el('#soldPct').textContent = pct + '%';
    }

    /* ==========================
       Lista + paginación
       ========================== */
    function pageRange(page){
      const start = (page-1)*PAGE_SIZE; // inclusive
      const end = start + PAGE_SIZE - 1; // inclusive
      return [start, end];
    }

    function buildPagination(){
      const wrap = el('#pagination');
      wrap.innerHTML = '';
      for(let p=1;p<=5;p++){
        const [a,b] = pageRange(p);
        const btn = document.createElement('button');
        btn.className = 'btn' + (p===currentPage ? ' primary' : '');
        btn.textContent = p;
        btn.title = `Página ${p} — ${pad4(a)}–${pad4(b)}`;
        btn.addEventListener('click', ()=>{ currentPage=p; buildPagination(); renderTickets(); });
        wrap.appendChild(btn);
      }
    }

    function renderTickets(){
      const grid = el('#tickets');
      grid.innerHTML = '';
      const sold = getSold();
      const [start, end] = pageRange(currentPage);
      for(let n=start; n<=end; n++){
        const btn = document.createElement('button');
        btn.className = 'ticket';
        btn.textContent = pad4(n);
        if(sold.has(n)){
          btn.classList.add('sold');
          btn.disabled = true;
          btn.title = 'Vendido';
        }else if(selected.has(n)){
          btn.classList.add('selected');
          btn.disabled = true;
          btn.title = 'Ya seleccionado';
        }else{
          btn.addEventListener('click', ()=>selectTicket(n));
        }
        grid.appendChild(btn);
      }
      updateTotalsUI();
    }

    function selectTicket(n){ selected.add(n); renderTickets(); renderSelectedChips(); }
    function deselectTicket(n){ selected.delete(n); renderTickets(); renderSelectedChips(); }

    function renderSelectedChips(){
      const box = el('#selectedChips');
      box.innerHTML = '';
      [...selected].sort((a,b)=>a-b).forEach(n=>{
        const chip = document.createElement('span');
        chip.className = 'chip';
        chip.innerHTML = `<span>${pad4(n)}</span>`;
        const x = document.createElement('button');
        x.type = 'button'; x.textContent = '×';
        x.addEventListener('click', ()=>deselectTicket(n));
        chip.appendChild(x);
        box.appendChild(chip);
      });
    }

    function updateTotalsUI(){
      const count = selected.size;
      const total = count * PRICE_PER_TICKET;
      el('#selCount').textContent = count;
      el('#totalAmount').textContent = total + ' Bs';
      el('#minMsg').style.display = 'none';
    }

    function randomPick(count=3){
      const sold = getSold();
      const pool = [];
      for(let n=0;n<TOTAL_TICKETS;n++) if(!sold.has(n) && !selected.has(n)) pool.push(n);
      if(pool.length === 0){ alert('No hay boletos disponibles.'); return; }
      while(selected.size < count && pool.length){
        const idx = Math.floor(Math.random()*pool.length);
        const n = pool.splice(idx,1)[0];
        selected.add(n);
      }
      const first = [...selected].sort((a,b)=>a-b)[0];
      if(first!==undefined){ currentPage = Math.floor(first / PAGE_SIZE) + 1; buildPagination(); }
      renderTickets(); renderSelectedChips();
    }

    function handleSearch(){
      const raw = el('#searchInput').value.trim();
      if(!/^\d{1,4}$/.test(raw)) return;
      const n = parseInt(raw,10);
      if(n<0 || n>9999) return;
      const page = Math.floor(n / PAGE_SIZE) + 1;
      currentPage = page; buildPagination(); renderTickets();
      const sold = getSold();
      if(sold.has(n)){ alert(`El boleto ${pad4(n)} ya está vendido.`); return; }
      if(selected.has(n)){ alert(`El boleto ${pad4(n)} ya está en tu selección.`); return; }
      selectTicket(n);
    }

    /* ==========================
       Pagos
       ========================== */
    function renderPayMethods(){
      const wrap = el('#payMethods'); wrap.innerHTML = '';
      PAYMENT_METHODS.forEach(m=>{
        const card = document.createElement('div');
        card.className = 'pm-card';
        card.innerHTML = `<img src="${m.logo}" alt="${m.name}"><div style="font-weight:800;">${m.name}</div>`;
        card.addEventListener('click', ()=>selectPayMethod(m.key));
        card.dataset.key = m.key;
        wrap.appendChild(card);
      });
    }

    function selectPayMethod(key){
      chosenPayKey = key;
      els('.pm-card').forEach(c=>c.classList.toggle('active', c.dataset.key===key));
      const m = PAYMENT_METHODS.find(x=>x.key===key);
      const d = el('#payDetails');
      d.style.display = 'block';
      d.innerHTML = `<div style="font-weight:800; margin-bottom:6px;">Datos para ${m.name}</div>` +
        '<ul style="margin:0; padding-left:18px;">' + m.details.map(x=>`<li>${x}</li>`).join('') + '</ul>' +
        '<div class="subtle" style="margin-top:8px;">* Copia los datos y realiza el pago. Luego sube el comprobante.</div>';
    }

    /* ==========================
       Confirmar compra + mis boletos
       ========================== */
    async function confirmPurchase(){
      if(selected.size < 3){ el('#minMsg').style.display = 'block'; el('#minMsg').scrollIntoView({behavior:'smooth', block:'center'}); return; }
      const name = el('#name').value.trim();
      const idnum = el('#idnum').value.trim();
      const ref6 = el('#ref6').value.trim();
      const proof = el('#proof').files[0] || null;
      if(!name || !idnum){ alert('Completa nombre y cédula.'); return; }
      if(!iti){ alert('Error con el campo de teléfono.'); return; }
      const phoneE164 = iti.getNumber();
      if(!phoneE164){ alert('Ingresa un teléfono válido.'); return; }
      if(!/^\d{6}$/.test(ref6)){ alert('La referencia debe tener exactamente 6 dígitos.'); return; }
      if(!chosenPayKey){ alert('Selecciona un método de pago.'); return; }
      if(!proof){ alert('Sube el comprobante de pago.'); return; }

      const proofDataUrl = await new Promise((res,rej)=>{ const r = new FileReader(); r.onload = ()=>res(r.result); r.onerror = rej; r.readAsDataURL(proof); });

      const order = {
        id: 'ORD-' + Date.now(),
        name, idnum, phone: phoneE164, payMethod: chosenPayKey, ref6,
        proof: proofDataUrl, tickets: [...selected].sort((a,b)=>a-b),
        price: PRICE_PER_TICKET, total: selected.size * PRICE_PER_TICKET,
        createdAt: new Date().toISOString()
      };
      const orders = getOrders(); orders.push(order); setOrders(orders);

      const sold = getSold(); order.tickets.forEach(n=>sold.add(n)); setSold(sold);

      // Reset selección
      selected.clear(); renderSelectedChips(); renderTickets(); updateProgress(); updateTotalsUI();

      // Mostrar CTA "Ver mis boletos" y panel de diamantes
      el('#myTicketsCta').style.display = 'block';
      showMyTickets(order);
      el('#myTicketsPanel').scrollIntoView({behavior:'smooth'});
    }

    function showMyTickets(order){
      const panel = el('#myTicketsPanel'); panel.style.display = 'block';
      el('#myTicketsInfo').textContent = `${order.name} — Tel: ${order.phone} — Ref: ${order.ref6}`;
      const wrap = el('#myDiamonds'); wrap.innerHTML='';
      order.tickets.forEach(n=>{ const d=document.createElement('div'); d.className='diamond'; d.textContent=pad4(n); wrap.appendChild(d); });
    }

    /* ==========================
       Verificador
       ========================== */
    function verify(){
      const raw = el('#verifyInput').value.trim();
      const out = el('#verifyOut'); out.innerHTML = '';
      const orders = getOrders();
      let hits = [];
      if(/^\d{4}$/.test(raw)){
        const t = parseInt(raw,10); hits = orders.filter(o=>o.tickets.includes(t));
      } else {
        hits = orders.filter(o=> o.phone.includes(raw));
      }
      if(hits.length===0){ out.innerHTML = '<div class="subtle">No se encontraron compras.</div>'; return; }
      hits.forEach(o=>{
        const card = document.createElement('div');
        card.className = 'panel';
        card.style.marginTop = '10px';
        card.innerHTML = `<div style="font-weight:800; margin-bottom:6px;">${o.name} · CI ${o.idnum} · ${o.phone}</div>` +
                          `<div class="subtle">Pedido ${o.id} — ${new Date(o.createdAt).toLocaleString('es-VE')}</div>` +
                          `<div style="margin:8px 0; font-weight:800;">Total: ${o.total} Bs</div>`;
        const dwrap = document.createElement('div'); dwrap.className='diamonds';
        o.tickets.forEach(n=>{ const d=document.createElement('div'); d.className='diamond'; d.textContent=pad4(n); dwrap.appendChild(d); });
        card.appendChild(dwrap); out.appendChild(card);
      });
    }

    /* ==========================
       Init
       ========================== */
    window.addEventListener('DOMContentLoaded', ()=>{
      // Links de contacto
      el('#waLink').href = WA_URL; el('#mapLink').href = MAPS_URL; el('#fbLink').href = FB_URL; el('#igLink').href = IG_URL;

      // Teléfono con bandera
      try{ iti = window.intlTelInput(el('#phone'), { initialCountry:'ve', separateDialCode:true, utilsScript:'https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/js/utils.js' }); }catch{}

      // Paginación + lista (Página 1 => 0000–1999)
      buildPagination(); renderTickets(); updateProgress(); renderPayMethods();

      // Eventos
      el('#btnRandom').addEventListener('click', ()=>randomPick(3));
      el('#searchInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); handleSearch(); }});
      el('#btnConfirm').addEventListener('click', confirmPurchase);
      el('#btnVerify').addEventListener('click', verify);
      el('#btnSeeMine')?.addEventListener('click', ()=>{
        const orders = getOrders(); if(orders.length){ showMyTickets(orders[orders.length-1]); el('#myTicketsPanel').scrollIntoView({behavior:'smooth'}); }
      });
    });
  </script>
</body>
</html>
