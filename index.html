<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuChat ‚Äî Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* === Tarjetas tipo Tinder con animaci√≥n === */
.model-item {
  position:relative;
  background:#0c1728;
  border-radius:14px;
  overflow:hidden;
  border:1px solid #203a5d;
  transition:transform .3s ease, box-shadow .3s ease;
}
.model-item:hover {
  transform:scale(1.03);
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}
.model-photo {
  width:100%;
  height:240px;
  object-fit:cover;
  display:block;
}
.model-online {
  position:absolute;
  top:10px;
  right:10px;
  background:#27ae60;
  color:#fff;
  padding:2px 6px;
  border-radius:8px;
  font-size:12px;
}
.model-info {
  padding:8px;
}
.model-buttons {
  display:flex;
  gap:6px;
  margin-top:6px;
}
.model-buttons button {
  flex:1;
  border:none;
  padding:8px;
  font-size:13px;
  font-weight:600;
  cursor:pointer;
  border-radius:8px;
}
.btn-like {background:#ff2e6a;color:#fff;}
.btn-msg {background:#0d223b;color:#cfe7ff;}

/* ====== ESTILOS BASE ====== */
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:Poppins,system-ui,sans-serif;background:#0b1220;color:#e9f6ff}
a{color:inherit;text-decoration:none}
.hidden{display:none!important}
.container{max-width:1100px;margin:0 auto;padding:16px}
.header{position:sticky;top:0;z-index:50;background:rgba(10,18,32,.65);backdrop-filter:blur(6px);border-bottom:1px solid #132338}
.header-inner{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.dot{width:10px;height:10px;border-radius:50%;background:#ff2e6a;display:inline-block}
.btn{border:0;padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer;transition:.15s}
.btn:active{transform:translateY(1px)}
.btn-primary{background:#ff2e6a;color:#fff}
.btn-secondary{background:#0d223b;color:#cfe7ff}
.btn-ghost{background:transparent;color:#cfe7ff;border:1px solid #244362}
.btn-danger{background:#ef476f;color:#fff}
.btn-success{background:#18c37e;color:#fff}
.btn-warning{background:#ffb020;color:#1b1407}
.input{width:100%;background:#0e192a;color:#d9eeff;border:1px solid #1f3550;border-radius:12px;padding:12px 14px}
.card{background:#0f1a2b;border:1px solid #1b3150;border-radius:18px;padding:16px;box-shadow:0 10px 32px rgba(0,0,0,.35)}
.small{color:#9bc2df;font-size:12px}

/* Auth */
.auth-wrap{min-height:100dvh;display:grid;place-items:center;background:#0b1220}
.auth-card{width:min(480px,92vw)}
.auth-tabs{display:flex;gap:8px;margin-bottom:12px}
.auth-tabs .btn{flex:1}

/* Layout chat */
.chat-layout{display:grid;grid-template-columns:320px 1fr;gap:16px}
@media (max-width:960px){.chat-layout{grid-template-columns:1fr}}
.sidebar .coins{display:flex;gap:8px;align-items:center;justify-content:space-between;background:#0f1a2b;border:1px solid #1b3150;padding:10px 12px;border-radius:14px;margin-bottom:12px}
.model-list{display:grid;gap:12px}
.chat-card{height:calc(100dvh - 150px);display:flex;flex-direction:column}
.chat-body{flex:1;overflow:auto;display:flex;flex-direction:column;gap:8px;padding:10px 2px}
.msg{max-width:70%;padding:10px 12px;border-radius:14px;line-height:1.35;font-size:15px}
.msg.you{align-self:flex-end;background:#12253c}
.msg.them{align-self:flex-start;background:#0c1728}
.typing{color:#99c7ff;font-size:12px;padding:6px 0;display:none}
.typing.on{display:block}
.chat-input{display:flex;gap:8px;align-items:center;padding-top:10px;border-top:1px solid #1b3150}
.chat-input .input{flex:1}

.view{display:none}.view.active{display:block}
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-inner container">
    <div class="brand"><span class="dot"></span> TuChat ‚≠ê</div>
    <nav style="display:flex;gap:8px">
      <button class="btn btn-ghost" data-go="auth">Auth</button>
      <button class="btn btn-ghost" data-go="chat">Chat</button>
      <button class="btn btn-ghost" data-go="profile">Perfil</button>
      <button id="btnGlobalLogout" class="btn btn-danger">Salir</button>
    </nav>
  </div>
</header>

<main class="container">
  <!-- AUTH -->
  <section id="view-auth" class="view active">
    <div class="auth-wrap">
      <div class="auth-card card">
        <div class="auth-tabs">
          <button class="btn btn-secondary" id="tabLogin">Iniciar sesi√≥n</button>
          <button class="btn btn-ghost" id="tabReg">Registrarme</button>
        </div>
        <div id="loginBox">
          <div class="field"><input class="input" id="loginId" placeholder="Correo"/></div>
          <div class="field"><input class="input" id="loginPass" type="password" placeholder="Contrase√±a"/></div>
          <button class="btn btn-primary" id="btnLogin">Entrar</button>
        </div>
        <div id="regBox" class="hidden">
          <div class="field"><input class="input" id="regEmail" placeholder="Correo"/></div>
          <div class="field"><input class="input" id="regAlias" placeholder="Alias"/></div>
          <div class="field"><input class="input" id="regPass" type="password" placeholder="Contrase√±a"/></div>
          <button class="btn btn-primary" id="btnRegister">Crear cuenta</button>
        </div>
      </div>
    </div>
  </section>

  <!-- CHAT -->
  <section id="view-chat" class="view">
    <div class="chat-layout">
      <aside class="sidebar">
        <div class="coins">Monedas: <b id="coinsLabel">0</b></div>
        <div class="model-list" id="chatList"></div>
      </aside>
      <section class="card chat-card">
        <div class="chat-body" id="messages"></div>
        <div class="typing" id="typingHint">Est√° escribiendo‚Ä¶</div>
        <div class="chat-input">
          <input class="input" id="msgText" placeholder="Escribe un mensaje (2 monedas)"/>
          <button class="btn btn-primary" id="btnSend">Enviar</button>
        </div>
      </section>
    </div>
  </section>

  <!-- PROFILE -->
  <section id="view-profile" class="view">
    <div class="card">
      <h3>Mi perfil</h3>
      <div class="field"><input class="input" id="pAlias" placeholder="Alias"/></div>
      <div class="field"><input class="input" id="pStatus" placeholder="Estado"/></div>
      <button class="btn btn-primary" id="btnSaveProfile">Guardar</button>
    </div>
  </section>
</main>

<script>
/* ===== Helpers DB ===== */
const DB={get:(k,f=null)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};
const START_COINS=50, COIN_PER_MSG=2;
if(!DB.get('models'))DB.set('models',[
  {id:'m1',name:'Luna',desc:'Tierna y juguetona',img:'https://picsum.photos/300/400?1'},
  {id:'m2',name:'Mila',desc:'Charla traviesa',img:'https://picsum.photos/300/400?2'},
  {id:'m3',name:'Arya',desc:'Curiosa y divertida',img:'https://picsum.photos/300/400?3'}
]);
if(!DB.get('users'))DB.set('users',[]);

/* ===== Router ===== */
const views={auth:'view-auth',chat:'view-chat',profile:'view-profile'};
function go(v){Object.values(views).forEach(id=>document.getElementById(id).classList.remove('active'));document.getElementById(views[v]).classList.add('active');}
document.querySelectorAll('[data-go]').forEach(b=>b.onclick=()=>go(b.dataset.go));

/* ===== Auth tabs ===== */
document.getElementById('tabLogin').onclick=()=>{
  document.getElementById('loginBox').classList.remove('hidden');
  document.getElementById('regBox').classList.add('hidden');
};
document.getElementById('tabReg').onclick=()=>{
  document.getElementById('regBox').classList.remove('hidden');
  document.getElementById('loginBox').classList.add('hidden');
};

/* ===== Auth Login/Registro ===== */
let session=null;
document.getElementById('btnLogin').onclick=()=>{
  const id=document.getElementById('loginId').value.trim();
  const pass=document.getElementById('loginPass').value.trim();
  const users=DB.get('users',[]);
  const u=users.find(x=>x.email===id && x.pass===pass);
  if(!u){alert('Credenciales incorrectas');return;}
  session={alias:u.alias,coins:u.coins||START_COINS};
  go('chat');renderModels();
};

document.getElementById('btnRegister').onclick=()=>{
  const email=document.getElementById('regEmail').value.trim();
  const alias=document.getElementById('regAlias').value.trim()||'Usuario';
  const pass=document.getElementById('regPass').value.trim();
  if(!email||!pass){alert('Completa correo y contrase√±a');return;}
  const users=DB.get('users',[]);
  if(users.find(u=>u.email===email)){alert('Ya existe ese correo');return;}
  users.push({email,alias,pass,coins:START_COINS});
  DB.set('users',users);
  session={alias:alias,coins:START_COINS};
  alert('Cuenta creada. ¬°Tienes 50 moneditas!');
  go('chat');renderModels();
};

document.getElementById('btnGlobalLogout').onclick=()=>{session=null;go('auth')};

/* ===== Perfil ===== */
document.getElementById('btnSaveProfile').onclick=()=>{if(session)session.alias=document.getElementById('pAlias').value};

/* ===== Chat ===== */
const messages=document.getElementById('messages'), coinsLabel=document.getElementById('coinsLabel');

/* Render modelos con ‚ù§ y üí¨ */
function renderModels(){
  coinsLabel.textContent=session?.coins||0;
  const list=document.getElementById('chatList');
  list.innerHTML='';
  DB.get('models',[]).forEach(m=>{
    const d=document.createElement('div');
    d.className='model-item';
    d.innerHTML=`
      <span class="model-online">‚óè Online</span>
      <img src="${m.img}" alt="${m.name}" class="model-photo">
      <div class="model-info">
        <b>${m.name}</b><br><span class="small">${m.desc||''}</span>
        <div class="model-buttons">
          <button class="btn-like">‚ù§</button>
          <button class="btn-msg">üí¨</button>
        </div>
      </div>
    `;
    d.querySelector('.btn-like').onclick=()=>likeModel(m);
    d.querySelector('.btn-msg').onclick=()=>messageModel(m);
    list.appendChild(d);
  });
}

let currentModel=null;
function likeModel(m){
  alert(`Le diste ‚ù§ a ${m.name} (demo)`);
}
function messageModel(m){
  currentModel=m;
  messages.innerHTML=`<div class="msg them">Holi ${session.alias} üíï soy ${m.name}, ¬øquieres jugar?</div>`;
  go('chat');
}

/* Enviar mensaje */
document.getElementById('btnSend').onclick=()=>{
  if(!currentModel)return;const val=document.getElementById('msgText').value;if(!val)return;
  if(session.coins<COIN_PER_MSG){alert('Sin monedas');return;}
  session.coins-=COIN_PER_MSG;coinsLabel.textContent=session.coins;
  messages.innerHTML+=`<div class="msg you">${val}</div>`;
  document.getElementById('msgText').value='';
  setTimeout(()=>messages.innerHTML+=`<div class="msg them">Me encanta üòç</div>`,800)
};

</script>
</body>
</html>
